Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-01-31T14:46:23+02:00

====== Настройка доступа к NAS по hostname ======

===== Включить обращение к серверу по hostname =====

Можно обращаться к NAS не по IP 192.168.1.20, а по hostname, например — “tower.local”.

Надо последовательно настроить всё
* на стороне OMV,
* на ноуте через редактирование файла /etc/hosts,
* на стороне роутера — тогда всё будет работать и на смартфонах.

==== Настройка внутри OMV ====

'''
System 
> Network
'''

* Hostname = выбрать заранее. Например, „tower”
* Domain name = можно мудрить, но лучше использовать стандартное „local”
* [Save / Apply / Yes]

==== Настройка /etc/hosts ====

На своём ноуте “''sudo mcedit /etc/hosts''”.

Добавить туда новую строку 

''192.168.1.20 tower.local''

Отныне с ноута все обращения к “''tower.local”'' будут перенаправляться на IP ''192.168.1.20''

==== Настройка DNS роутера ====

TODO - настройка DNS роутера

===== Подключение через браузер =====

* Открыть в браузере “''http://tower.local:81''” (внимание — http, а не https!) 
* Если OMV успешно откроется — залогиниться.

===== Подключение через ssh в консоли =====

В консоли подключение к “''ssh root@tower.local''” (также через “''ssh root@tower.local:81''”) сработает только после редактирования ''/etc/hosts''

Затем надо сделать подключение по ssh в новом процессе — открыть новое окно с консолью и  выполнить подключение под root (“''ssh root@tower.local''”) или же под «своим» юзером.

	Если не хочется переключаться в новое окно, можно в том же окне консоли сперва выполнить “''exec bash''” (It allows you to execute a command that completely replaces the current process), затем уже всё остальное.

При подключении к «новому» источнику будет предложен стандартный обмен ssh-ключами. 

	Он будет предложен даже в том случае, если уже была создана связка приватный/публичный ssh-ключ для данного юзера и в его настройках в OMV уже был опубликован публичный ключ (см. раздел [[SSH]] ).
