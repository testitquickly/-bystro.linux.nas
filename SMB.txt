Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-02-03T22:17:37+02:00

====== SMB ======

Протокол обмена файлами **Server Message Block** (SMB) был придуман в IBM в восьмидесятых годах ХХ века. Он позволяет монтировать сетевые каталоги (shared directory) в Linux для прямого доступа к их содержимому из Linux и Windows в закрытой сети (можно открыть доступ к каталогу извне, но это безопаснее делать через SFTP). Под Windows такая точка доступа будет выглядеть как Z:\Folder, в Linux как /mnt/folder.

	Протокол обмена файлами **Network File System** (NFS) аналогичен SMB, но пришел из мира Linux. Если к сетевому ресурсу будет нужен доступ //только// из Linux, рекомендуется использовать подключение по NFS.

	**Common Internet File System** (CIFS) — надстройка над SMB от Microsoft. 

	Позже появился набор самостоятельных утилит **LinuxCIFS** — это клиент для сервера Samba, основной инструмент для монтирования SMB shares в Linux.

Итого получился протокол для обмена файлами с названием «Samba». Он же в Windows называется «Сетевое окружение». 

	* сервер **Samba**, внутри него **ksmbd** — in-kernel SMB server, выполняет задачи файлового сервера.
	* утилиты **LinuxCIFS** — это клиент для сервера Samba, основной инструмент для монтирования SMB shares в Linux.

Что любопытно — на клиентском ноуте можно использовать **LinuxCIFS** без установки Samba. И подключение к удаленным ресурсам по протоколу — smb:// — тоже работает самостоятельно.

ACL в норме использовать [[https://wiki.omv-extras.org/doku.php?id=omv7:nas_permissions_omv7#general1|не надо]], потому что не надо смешивать стандартные механизмы ''Linux Permissions'' от Debian и ''Acess Control List'' от OMV, это может вызвать непредсказуемый батхёрт. ACL разумно использовать только когда какому-то юзеру надо ЯВНО запретить заходить в какой-то каталог.

1. [[+Включить SMB-CIFS]]
2. [[+Расшарить каталог]]
3. [[+Удалить shared-каталог из Samba]]

===== Практические примеры =====

[[Приложения:Примонтировать удаленный каталог с библиотекой Calibre]]
[[Приложения:Монтирование расшаренных windows-ресурсов в Linux (через CIFS)]]
